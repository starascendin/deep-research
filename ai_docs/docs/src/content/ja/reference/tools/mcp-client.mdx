---
title: "ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹: MCPClient | ãƒ„ãƒ¼ãƒ«ç®¡ç† | Mastra ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ"
description: MCPClientã®APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ - è¤‡æ•°ã®Model Context Protocolã‚µãƒ¼ãƒãƒ¼ã¨ãã®ãƒ„ãƒ¼ãƒ«ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚¯ãƒ©ã‚¹ã€‚
---



# MCPClient

`MCPClient`ã‚¯ãƒ©ã‚¹ã¯ã€Mastraã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§è¤‡æ•°ã®MCPã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã¨ãã®ãƒ„ãƒ¼ãƒ«ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã‚’æä¾›ã—ã¾ã™ã€‚æ¥ç¶šã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã€ãƒ„ãƒ¼ãƒ«ã®åå‰ç©ºé–“ç®¡ç†ã‚’å‡¦ç†ã—ã€è¨­å®šã•ã‚ŒãŸã™ã¹ã¦ã®ã‚µãƒ¼ãƒãƒ¼ã«ã‚ãŸã‚‹ãƒ„ãƒ¼ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚

ã“ã®ã‚¯ãƒ©ã‚¹ã¯éæ¨å¥¨ã®[`MastraMCPClient`](/reference/tools/client)ã«ä»£ã‚ã‚‹ã‚‚ã®ã§ã™ã€‚



## ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿

MCPClientã‚¯ãƒ©ã‚¹ã®æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

```typescript
constructor({
  id?: string;
  servers: Record<string, MastraMCPServerDefinition>;
  timeout?: number;
}: MCPClientOptions)
```

### MCPClientOptions

<br />
<PropertiesTable
  content={[
    {
      name: "id",
      type: "string",
      isOptional: true,
      description:
        "è¨­å®šã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ä¸€æ„è­˜åˆ¥å­ã€‚åŒä¸€ã®è¨­å®šã§è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹éš›ã«ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²ããŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚",
    },
    {
      name: "servers",
      type: "Record<string, MastraMCPServerDefinition>",
      description:
        "ã‚µãƒ¼ãƒãƒ¼è¨­å®šã®ãƒãƒƒãƒ—ã€‚å„ã‚­ãƒ¼ã¯ä¸€æ„ã®ã‚µãƒ¼ãƒãƒ¼è­˜åˆ¥å­ã§ã‚ã‚Šã€å€¤ã¯ã‚µãƒ¼ãƒãƒ¼è¨­å®šã§ã™ã€‚",
    },
    {
      name: "timeout",
      type: "number",
      isOptional: true,
      defaultValue: "60000",
      description:
        "å€‹ã€…ã®ã‚µãƒ¼ãƒãƒ¼è¨­å®šã§ä¸Šæ›¸ãã•ã‚Œãªã„é™ã‚Šã€ã™ã¹ã¦ã®ã‚µãƒ¼ãƒãƒ¼ã«é©ç”¨ã•ã‚Œã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ï¼ˆãƒŸãƒªç§’å˜ä½ï¼‰ã€‚",
    },
  ]}
/>

### MastraMCPServerDefinition

`servers`ãƒãƒƒãƒ—å†…ã®å„ã‚µãƒ¼ãƒãƒ¼ã¯`MastraMCPServerDefinition`ã‚¿ã‚¤ãƒ—ã‚’ä½¿ç”¨ã—ã¦è¨­å®šã•ã‚Œã¾ã™ã€‚ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã‚¿ã‚¤ãƒ—ã¯æä¾›ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦æ¤œå‡ºã•ã‚Œã¾ã™ï¼š

- `command`ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹å ´åˆã€Stdioãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚
- `url`ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹å ´åˆã€æœ€åˆã«Streamable HTTPãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã‚’è©¦ã¿ã€åˆæœŸæ¥ç¶šãŒå¤±æ•—ã—ãŸå ´åˆã¯ãƒ¬ã‚¬ã‚·ãƒ¼SSEãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¾ã™ã€‚

<br />
<PropertiesTable
  content={[
    {
      name: "command",
      type: "string",
      isOptional: true,
      description: "Stdioã‚µãƒ¼ãƒãƒ¼ã®å ´åˆï¼šå®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã€‚",
    },
    {
      name: "args",
      type: "string[]",
      isOptional: true,
      description: "Stdioã‚µãƒ¼ãƒãƒ¼ã®å ´åˆï¼šã‚³ãƒãƒ³ãƒ‰ã«æ¸¡ã™å¼•æ•°ã€‚",
    },
    {
      name: "env",
      type: "Record<string, string>",
      isOptional: true,
      description:
        "Stdioã‚µãƒ¼ãƒãƒ¼ã®å ´åˆï¼šã‚³ãƒãƒ³ãƒ‰ã«è¨­å®šã™ã‚‹ç’°å¢ƒå¤‰æ•°ã€‚",
    },
    {
      name: "url",
      type: "URL",
      isOptional: true,
      description:
        "HTTPã‚µãƒ¼ãƒãƒ¼ï¼ˆStreamable HTTPã¾ãŸã¯SSEï¼‰ã®å ´åˆï¼šã‚µãƒ¼ãƒãƒ¼ã®URLã€‚",
    },
    {
      name: "requestInit",
      type: "RequestInit",
      isOptional: true,
      description: "HTTPã‚µãƒ¼ãƒãƒ¼ã®å ´åˆï¼šfetch APIã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¨­å®šã€‚",
    },
    {
      name: "eventSourceInit",
      type: "EventSourceInit",
      isOptional: true,
      description:
        "SSEãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®å ´åˆï¼šSSEæ¥ç¶šç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚§ãƒƒãƒè¨­å®šã€‚SSEã§ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã«å¿…è¦ã§ã™ã€‚",
    },
    {
      name: "logger",
      type: "LogHandler",
      isOptional: true,
      description: "ãƒ­ã‚®ãƒ³ã‚°ç”¨ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¿½åŠ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã€‚",
    },
    {
      name: "timeout",
      type: "number",
      isOptional: true,
      description: "ã‚µãƒ¼ãƒãƒ¼å›ºæœ‰ã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆãƒŸãƒªç§’å˜ä½ï¼‰ã€‚",
    },
    {
      name: "capabilities",
      type: "ClientCapabilities",
      isOptional: true,
      description: "ã‚µãƒ¼ãƒãƒ¼å›ºæœ‰ã®æ©Ÿèƒ½è¨­å®šã€‚",
    },
    {
      name: "enableServerLogs",
      type: "boolean",
      isOptional: true,
      defaultValue: "true",
      description: "ã“ã®ã‚µãƒ¼ãƒãƒ¼ã®ãƒ­ã‚®ãƒ³ã‚°ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‹ã©ã†ã‹ã€‚",
    },
  ]}
/>



## ãƒ¡ã‚½ãƒƒãƒ‰

### getTools()

è¨­å®šã•ã‚ŒãŸã™ã¹ã¦ã®ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ã™ã¹ã¦ã®ãƒ„ãƒ¼ãƒ«ã‚’å–å¾—ã—ã€ãƒ„ãƒ¼ãƒ«åã‚’ã‚µãƒ¼ãƒãƒ¼åã§åå‰ç©ºé–“åŒ–ï¼ˆ`serverName_toolName`ã®å½¢å¼ï¼‰ã—ã¦ç«¶åˆã‚’é˜²ãã¾ã™ã€‚
Agentå®šç¾©ã«æ¸¡ã™ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

```ts
new Agent({ tools: await mcp.getTools() });
```

### getToolsets()

åå‰ç©ºé–“åŒ–ã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«åï¼ˆ`serverName.toolName`ã®å½¢å¼ï¼‰ã‚’ãã®ãƒ„ãƒ¼ãƒ«å®Ÿè£…ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚
generateã¾ãŸã¯streamãƒ¡ã‚½ãƒƒãƒ‰ã«å‹•çš„ã«æ¸¡ã™ã“ã¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

```typescript
const res = await agent.stream(prompt, {
  toolsets: await mcp.getToolsets(),
});
```

### disconnect()

ã™ã¹ã¦ã®MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆ‡æ–­ã—ã€ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

```typescript
async disconnect(): Promise<void>
```

### `resources` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

`MCPClient`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã€ãƒªã‚½ãƒ¼ã‚¹é–¢é€£ã®æ“ä½œã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹`resources`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã¾ã™ã€‚

```typescript
const mcpClient = new MCPClient({
  /* ...servers configuration... */
});

// mcpClient.resourcesçµŒç”±ã§ãƒªã‚½ãƒ¼ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹
const allResourcesByServer = await mcpClient.resources.list();
const templatesByServer = await mcpClient.resources.templates();
// ... ãã®ä»–ã®ãƒªã‚½ãƒ¼ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¤ã„ã¦ã‚‚åŒæ§˜
```

#### `resources.list()`

æ¥ç¶šã•ã‚ŒãŸã™ã¹ã¦ã®MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã—ã€ã‚µãƒ¼ãƒãƒ¼åã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¾ã™ã€‚

```typescript
async list(): Promise<Record<string, Resource[]>>
```

ä¾‹ï¼š

```typescript
const resourcesByServer = await mcpClient.resources.list();
for (const serverName in resourcesByServer) {
  console.log(`Resources from ${serverName}:`, resourcesByServer[serverName]);
}
```

#### `resources.templates()`

æ¥ç¶šã•ã‚ŒãŸã™ã¹ã¦ã®MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å–å¾—ã—ã€ã‚µãƒ¼ãƒãƒ¼åã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¾ã™ã€‚

```typescript
async templates(): Promise<Record<string, ResourceTemplate[]>>
```

ä¾‹ï¼š

```typescript
const templatesByServer = await mcpClient.resources.templates();
for (const serverName in templatesByServer) {
  console.log(`Templates from ${serverName}:`, templatesByServer[serverName]);
}
```

#### `resources.read(serverName: string, uri: string)`

æŒ‡å®šã•ã‚ŒãŸã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ã®å†…å®¹ã‚’èª­ã¿å–ã‚Šã¾ã™ã€‚

```typescript
async read(serverName: string, uri: string): Promise<ReadResourceResult>
```

- `serverName`: ã‚µãƒ¼ãƒãƒ¼ã®è­˜åˆ¥å­ï¼ˆ`servers`ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ä½¿ç”¨ã•ã‚Œã‚‹ã‚­ãƒ¼ï¼‰ã€‚
- `uri`: èª­ã¿å–ã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®URIã€‚

ä¾‹ï¼š

```typescript
const content = await mcpClient.resources.read(
  "myWeatherServer",
  "weather://current",
);
console.log("Current weather:", content.contents[0].text);
```

#### `resources.subscribe(serverName: string, uri: string)`

æŒ‡å®šã•ã‚ŒãŸã‚µãƒ¼ãƒãƒ¼ä¸Šã®ç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°ã‚’è³¼èª­ã—ã¾ã™ã€‚

```typescript
async subscribe(serverName: string, uri: string): Promise<object>
```

ä¾‹ï¼š

```typescript
await mcpClient.resources.subscribe("myWeatherServer", "weather://current");
```

#### `resources.unsubscribe(serverName: string, uri: string)`

æŒ‡å®šã•ã‚ŒãŸã‚µãƒ¼ãƒãƒ¼ä¸Šã®ç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ã®æ›´æ–°è³¼èª­ã‚’è§£é™¤ã—ã¾ã™ã€‚

```typescript
async unsubscribe(serverName: string, uri: string): Promise<object>
```

ä¾‹ï¼š

```typescript
await mcpClient.resources.unsubscribe("myWeatherServer", "weather://current");
```

#### `resources.onUpdated(serverName: string, handler: (params: { uri: string }) => void)`

ç‰¹å®šã®ã‚µãƒ¼ãƒãƒ¼ä¸Šã§è³¼èª­ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ãŒæ›´æ–°ã•ã‚ŒãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã‚‹é€šçŸ¥ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚

```typescript
async onUpdated(serverName: string, handler: (params: { uri: string }) => void): Promise<void>
```

ä¾‹ï¼š

```typescript
mcpClient.resources.onUpdated("myWeatherServer", (params) => {
  console.log(`Resource updated on myWeatherServer: ${params.uri}`);
  // ã“ã“ã§ãƒªã‚½ãƒ¼ã‚¹ã®å†…å®¹ã‚’å†å–å¾—ã—ãŸã„å ´åˆãŒã‚ã‚Šã¾ã™
  // await mcpClient.resources.read("myWeatherServer", params.uri);
});
```

#### `resources.onListChanged(serverName: string, handler: () => void)`

ç‰¹å®šã®ã‚µãƒ¼ãƒãƒ¼ä¸Šã§åˆ©ç”¨å¯èƒ½ãªãƒªã‚½ãƒ¼ã‚¹ã®å…¨ä½“çš„ãªãƒªã‚¹ãƒˆãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã‚‹é€šçŸ¥ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚

```typescript
async onListChanged(serverName: string, handler: () => void): Promise<void>
```

ä¾‹ï¼š

```typescript
mcpClient.resources.onListChanged("myWeatherServer", () => {
  console.log("Resource list changed on myWeatherServer.");
  // ãƒªã‚½ãƒ¼ã‚¹ã®ãƒªã‚¹ãƒˆã‚’å†å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
  // await mcpClient.resources.list();
});
```

### `prompts` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

`MCPClient`ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé–¢é€£ã®æ“ä½œã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹`prompts`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã¾ã™ã€‚



```typescript
const mcpClient = new MCPClient({
  /* ...servers configuration... */
});

// Access prompt methods via mcpClient.prompts
const allPromptsByServer = await mcpClient.prompts.list();
const { prompt, messages } = await mcpClient.prompts.get({
  serverName: "myWeatherServer",
  name: "current",
});
```

### `elicitation` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

`MCPClient` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ã¯ã€elicitationé–¢é€£ã®æ“ä½œã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’æä¾›ã™ã‚‹ `elicitation` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã¾ã™ã€‚Elicitationã«ã‚ˆã‚Šã€MCPã‚µãƒ¼ãƒãƒ¼ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±ã‚’è¦æ±‚ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```typescript
const mcpClient = new MCPClient({
  /* ...servers configuration... */
});

// Set up elicitation handler
mcpClient.elicitation.onRequest('serverName', async (request) => {
  // Handle elicitation request from server
  console.log('Server requests:', request.message);
  console.log('Schema:', request.requestedSchema);
  
  // Return user response
  return {
    action: 'accept',
    content: { name: 'John Doe', email: 'john@example.com' }
  };
});
```

#### `elicitation.onRequest(serverName: string, handler: ElicitationHandler)`

æ¥ç¶šã•ã‚ŒãŸMCPã‚µãƒ¼ãƒãƒ¼ãŒelicitationãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ãŸéš›ã«å‘¼ã³å‡ºã•ã‚Œã‚‹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ã‚’è¨­å®šã—ã¾ã™ã€‚ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘å–ã‚Šã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**ElicitationHandleré–¢æ•°:**

ãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ã¯ä»¥ä¸‹ã‚’å«ã‚€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å—ã‘å–ã‚Šã¾ã™ï¼š
- `message`: å¿…è¦ãªæƒ…å ±ã‚’èª¬æ˜ã™ã‚‹äººé–“ãŒèª­ã‚ã‚‹å½¢å¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- `requestedSchema`: æœŸå¾…ã•ã‚Œã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®æ§‹é€ ã‚’å®šç¾©ã™ã‚‹JSONã‚¹ã‚­ãƒ¼ãƒ

ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¯ä»¥ä¸‹ã‚’å«ã‚€ `ElicitResult` ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š
- `action`: `'accept'`ã€`'decline'`ã€ã¾ãŸã¯ `'cancel'` ã®ã„ãšã‚Œã‹
- `content`: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆactionãŒ `'accept'` ã®å ´åˆã®ã¿ï¼‰

**ä¾‹:**

```typescript
mcpClient.elicitation.onRequest('serverName', async (request) => {
  console.log(`Server requests: ${request.message}`);
  
  // Example: Simple user input collection
  if (request.requestedSchema.properties.name) {
    // Simulate user accepting and providing data
    return {
      action: 'accept',
      content: {
        name: 'Alice Smith',
        email: 'alice@example.com'
      }
    };
  }
  
  // Simulate user declining the request
  return { action: 'decline' };
});
```

**å®Œå…¨ãªã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªä¾‹:**



```typescript
import { MCPClient } from '@mastra/mcp';
import { createInterface } from 'readline';

const readline = createInterface({
  input: process.stdin,
  output: process.stdout,
});

function askQuestion(question: string): Promise<string> {
  return new Promise(resolve => {
    readline.question(question, answer => resolve(answer.trim()));
  });
}

const mcpClient = new MCPClient({
  servers: {
    interactiveServer: {
      url: new URL('http://localhost:3000/mcp'),
    },
  },
});

// Set up interactive elicitation handler
await mcpClient.elicitation.onRequest('interactiveServer', async (request) => {
  console.log(`\nğŸ“‹ Server Request: ${request.message}`);
  console.log('Required information:');
  
  const schema = request.requestedSchema;
  const properties = schema.properties || {};
  const required = schema.required || [];
  const content: Record<string, any> = {};
  
  // Collect input for each field
  for (const [fieldName, fieldSchema] of Object.entries(properties)) {
    const field = fieldSchema as any;
    const isRequired = required.includes(fieldName);
    
    let prompt = `${field.title || fieldName}`;
    if (field.description) prompt += ` (${field.description})`;
    if (isRequired) prompt += ' *required*';
    prompt += ': ';
    
    const answer = await askQuestion(prompt);
    
    // Handle cancellation
    if (answer.toLowerCase() === 'cancel') {
      return { action: 'cancel' };
    }
    
    // Validate required fields
    if (answer === '' && isRequired) {
      console.log(`âŒ ${fieldName} is required`);
      return { action: 'decline' };
    }
    
    if (answer !== '') {
      content[fieldName] = answer;
    }
  }
  
  // Confirm submission
  console.log('\nğŸ“ You provided:');
  console.log(JSON.stringify(content, null, 2));
  
  const confirm = await askQuestion('\nSubmit this information? (yes/no/cancel): ');
  
  if (confirm.toLowerCase() === 'yes' || confirm.toLowerCase() === 'y') {
    return { action: 'accept', content };
  } else if (confirm.toLowerCase() === 'cancel') {
    return { action: 'cancel' };
  } else {
    return { action: 'decline' };
  }
});
```

#### `prompts.list()`

æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®MCPã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰åˆ©ç”¨å¯èƒ½ãªã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å–å¾—ã—ã€ã‚µãƒ¼ãƒãƒ¼åã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ã¾ã™ã€‚

```typescript
async list(): Promise<Record<string, Prompt[]>>
```

ä¾‹ï¼š

```typescript
const promptsByServer = await mcpClient.prompts.list();
for (const serverName in promptsByServer) {
  console.log(`Prompts from ${serverName}:`, promptsByServer[serverName]);
}
```

#### `prompts.get({ serverName, name, args?, version? })`

ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ç‰¹å®šã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ãã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—ã—ã¾ã™ã€‚

```typescript
async get({
  serverName,
  name,
  args?,
  version?,
}: {
  serverName: string;
  name: string;
  args?: Record<string, any>;
  version?: string;
}): Promise<{ prompt: Prompt; messages: PromptMessage[] }>
```

ä¾‹ï¼š

```typescript
const { prompt, messages } = await mcpClient.prompts.get({
  serverName: "myWeatherServer",
  name: "current",
  args: { location: "London" },
});
console.log(prompt);
console.log(messages);
```

#### `prompts.onListChanged(serverName: string, handler: () => void)`

ç‰¹å®šã®ã‚µãƒ¼ãƒãƒ¼ã§åˆ©ç”¨å¯èƒ½ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒªã‚¹ãƒˆãŒå¤‰æ›´ã•ã‚ŒãŸã¨ãã«å‘¼ã³å‡ºã•ã‚Œã‚‹é€šçŸ¥ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã—ã¾ã™ã€‚

```typescript
async onListChanged(serverName: string, handler: () => void): Promise<void>
```

ä¾‹ï¼š

```typescript
mcpClient.prompts.onListChanged("myWeatherServer", () => {
  console.log("Prompt list changed on myWeatherServer.");
  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ãƒªã‚¹ãƒˆã‚’å†å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
  // await mcpClient.prompts.list();
});
```



## Elicitation

Elicitationã¯ã€MCPã‚µãƒ¼ãƒãƒ¼ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±ã‚’è¦æ±‚ã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚ã‚µãƒ¼ãƒãƒ¼ãŒè¿½åŠ ã®ãƒ‡ãƒ¼ã‚¿ã‚’å¿…è¦ã¨ã™ã‚‹å ´åˆã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’è¡¨ç¤ºã—ã¦å‡¦ç†ã™ã‚‹elicitationãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã§ãã¾ã™ã€‚ä¸€èˆ¬çš„ãªä¾‹ã¯ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ä¸­ã§ã™ã€‚

### Elicitationã®ä»•çµ„ã¿

1. **ã‚µãƒ¼ãƒãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: MCPã‚µãƒ¼ãƒãƒ¼ãƒ„ãƒ¼ãƒ«ãŒ`server.elicitation.sendRequest()`ã‚’ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚¹ã‚­ãƒ¼ãƒã§å‘¼ã³å‡ºã™
2. **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼**: ã‚ãªãŸã®elicitationãƒãƒ³ãƒ‰ãƒ©ãƒ¼é–¢æ•°ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨å…±ã«å‘¼ã³å‡ºã•ã‚Œã‚‹
3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³**: ã‚ãªãŸã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’åé›†ã™ã‚‹ï¼ˆUIã€CLIç­‰ã‚’é€šã˜ã¦ï¼‰
4. **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: ã‚ãªãŸã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆaccept/decline/cancelï¼‰ã‚’è¿”ã™
5. **ãƒ„ãƒ¼ãƒ«ç¶™ç¶š**: ã‚µãƒ¼ãƒãƒ¼ãƒ„ãƒ¼ãƒ«ãŒãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å—ã‘å–ã‚Šã€å®Ÿè¡Œã‚’ç¶™ç¶šã™ã‚‹

### Elicitationã®è¨­å®š

elicitationã‚’ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹å‰ã«ã€elicitationãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```typescript
import { MCPClient } from '@mastra/mcp';

const mcpClient = new MCPClient({
  servers: {
    interactiveServer: {
      url: new URL('http://localhost:3000/mcp'),
    },
  },
});

// elicitationãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®š
mcpClient.elicitation.onRequest('interactiveServer', async (request) => {
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã«å¯¾ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†
  console.log(`Server needs: ${request.message}`);
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ã‚’åé›†ã™ã‚‹ã‚ãªãŸã®ãƒ­ã‚¸ãƒƒã‚¯
  const userData = await collectUserInput(request.requestedSchema);
  
  return {
    action: 'accept',
    content: userData
  };
});
```

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ—

ã‚ãªãŸã®elicitationãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã¯ã€3ã¤ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã®ã„ãšã‚Œã‹ã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

- **Accept**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã—ã€é€ä¿¡ã‚’ç¢ºèªã—ãŸ
  ```typescript
  return {
    action: 'accept',
    content: { name: 'John Doe', email: 'john@example.com' }
  };
  ```

- **Decline**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºçš„ã«æƒ…å ±ã®æä¾›ã‚’æ‹’å¦ã—ãŸ
  ```typescript
  return { action: 'decline' };
  ```

- **Cancel**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å´ä¸‹ã¾ãŸã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã—ãŸ
  ```typescript
  return { action: 'cancel' };
  ```

### ã‚¹ã‚­ãƒ¼ãƒãƒ™ãƒ¼ã‚¹ã®å…¥åŠ›åé›†

`requestedSchema`ã¯ã€ã‚µãƒ¼ãƒãƒ¼ãŒå¿…è¦ã¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®æ§‹é€ ã‚’æä¾›ã—ã¾ã™ï¼š

```typescript
await mcpClient.elicitation.onRequest('interactiveServer', async (request) => {
  const { properties, required = [] } = request.requestedSchema;
  const content: Record<string, any> = {};
  
  for (const [fieldName, fieldSchema] of Object.entries(properties || {})) {
    const field = fieldSchema as any;
    const isRequired = required.includes(fieldName);
    
    // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚¿ã‚¤ãƒ—ã¨è¦ä»¶ã«åŸºã¥ã„ã¦å…¥åŠ›ã‚’åé›†
    const value = await promptUser({
      name: fieldName,
      title: field.title,
      description: field.description,
      type: field.type,
      required: isRequired,
      format: field.format,
      enum: field.enum,
    });
    
    if (value !== null) {
      content[fieldName] = value;
    }
  }
  
  return { action: 'accept', content };
});
```

### ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

- **å¸¸ã«elicitationã‚’å‡¦ç†ã™ã‚‹**: elicitationã‚’ä½¿ç”¨ã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã™å‰ã«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’è¨­å®šã™ã‚‹
- **å…¥åŠ›ã‚’æ¤œè¨¼ã™ã‚‹**: å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®é¸æŠã‚’å°Šé‡ã™ã‚‹**: declineã¨cancelãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’é©åˆ‡ã«å‡¦ç†ã™ã‚‹
- **æ˜ç¢ºãªUI**: ã©ã®ã‚ˆã†ãªæƒ…å ±ãŒè¦æ±‚ã•ã‚Œã¦ã„ã‚‹ã‹ã€ãªãœå¿…è¦ãªã®ã‹ã‚’æ˜ç¢ºã«ã™ã‚‹
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: æ©Ÿå¯†æƒ…å ±ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’è‡ªå‹•æ‰¿èªã—ãªã„



## ä¾‹

### é™çš„ãƒ„ãƒ¼ãƒ«è¨­å®š

ã‚¢ãƒ—ãƒªå…¨ä½“ã§MCPã‚µãƒ¼ãƒãƒ¼ã¸ã®å˜ä¸€æ¥ç¶šã‚’æŒã¤ãƒ„ãƒ¼ãƒ«ã®å ´åˆã€`getTools()`ã‚’ä½¿ç”¨ã—ã¦ãƒ„ãƒ¼ãƒ«ã‚’ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«æ¸¡ã—ã¾ã™ï¼š

```typescript
import { MCPClient } from "@mastra/mcp";
import { Agent } from "@mastra/core/agent";
import { openai } from "@ai-sdk/openai";

const mcp = new MCPClient({
  servers: {
    stockPrice: {
      command: "npx",
      args: ["tsx", "stock-price.ts"],
      env: {
        API_KEY: "your-api-key",
      },
      log: (logMessage) => {
        console.log(`[${logMessage.level}] ${logMessage.message}`);
      },
    },
    weather: {
      url: new URL("http://localhost:8080/sse"),
    },
  },
  timeout: 30000, // Global 30s timeout
});

// Create an agent with access to all tools
const agent = new Agent({
  name: "Multi-tool Agent",
  instructions: "You have access to multiple tool servers.",
  model: openai("gpt-4"),
  tools: await mcp.getTools(),
});

// Example of using resource methods
async function checkWeatherResource() {
  try {
    const weatherResources = await mcp.resources.list();
    if (weatherResources.weather && weatherResources.weather.length > 0) {
      const currentWeatherURI = weatherResources.weather[0].uri;
      const weatherData = await mcp.resources.read(
        "weather",
        currentWeatherURI,
      );
      console.log("Weather data:", weatherData.contents[0].text);
    }
  } catch (error) {
    console.error("Error fetching weather resource:", error);
  }
}
checkWeatherResource();

// Example of using prompt methods
async function checkWeatherPrompt() {
  try {
    const weatherPrompts = await mcp.prompts.list();
    if (weatherPrompts.weather && weatherPrompts.weather.length > 0) {
      const currentWeatherPrompt = weatherPrompts.weather.find(
        (p) => p.name === "current"
      );
      if (currentWeatherPrompt) {
        console.log("Weather prompt:", currentWeatherPrompt);
      } else {
        console.log("Current weather prompt not found");
      }
    }
  } catch (error) {
    console.error("Error fetching weather prompt:", error);
  }
}
checkWeatherPrompt();
```

### å‹•çš„ãƒ„ãƒ¼ãƒ«ã‚»ãƒƒãƒˆ

å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦æ–°ã—ã„MCPæ¥ç¶šãŒå¿…è¦ãªå ´åˆã€`getToolsets()`ã‚’ä½¿ç”¨ã—ã¦streamã¾ãŸã¯generateã‚’å‘¼ã³å‡ºã™éš›ã«ãƒ„ãƒ¼ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```typescript
import { Agent } from "@mastra/core/agent";
import { MCPClient } from "@mastra/mcp";
import { openai } from "@ai-sdk/openai";

// Create the agent first, without any tools
const agent = new Agent({
  name: "Multi-tool Agent",
  instructions: "You help users check stocks and weather.",
  model: openai("gpt-4"),
});

// Later, configure MCP with user-specific settings
const mcp = new MCPClient({
  servers: {
    stockPrice: {
      command: "npx",
      args: ["tsx", "stock-price.ts"],
      env: {
        API_KEY: "user-123-api-key",
      },
      timeout: 20000, // Server-specific timeout
    },
    weather: {
      url: new URL("http://localhost:8080/sse"),
      requestInit: {
        headers: {
          Authorization: `Bearer user-123-token`,
        },
      },
    },
  },
});

// Pass all toolsets to stream() or generate()
const response = await agent.stream(
  "How is AAPL doing and what is the weather?",
  {
    toolsets: await mcp.getToolsets(),
  },
);
```



## ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç®¡ç†

`MCPClient`ã‚¯ãƒ©ã‚¹ã«ã¯ã€è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢æ©Ÿèƒ½ãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ï¼š

1. `id`ãªã—ã§åŒä¸€ã®æ§‹æˆã§è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ã¨ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²ããŸã‚ã«ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã¾ã™
2. åŒä¸€ã®æ§‹æˆã§è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå¿…è¦ãªå ´åˆã¯ã€å„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ä¸€æ„ã®`id`ã‚’æä¾›ã—ã¦ãã ã•ã„
3. åŒã˜æ§‹æˆã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å†ä½œæˆã™ã‚‹å‰ã«ã€`await configuration.disconnect()`ã‚’å‘¼ã³å‡ºã—ã¦ãã ã•ã„
4. 1ã¤ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã ã‘ãŒå¿…è¦ãªå ´åˆã¯ã€å†ä½œæˆã‚’é¿ã‘ã‚‹ãŸã‚ã«æ§‹æˆã‚’ã‚ˆã‚Šé«˜ã„ã‚¹ã‚³ãƒ¼ãƒ—ã«ç§»å‹•ã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„

ä¾‹ãˆã°ã€`id`ãªã—ã§åŒã˜æ§‹æˆã®è¤‡æ•°ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã‚ˆã†ã¨ã™ã‚‹ã¨ï¼š

```typescript
// æœ€åˆã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ - OK
const mcp1 = new MCPClient({
  servers: {
    /* ... */
  },
});

// åŒã˜æ§‹æˆã®2ç•ªç›®ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ - ã‚¨ãƒ©ãƒ¼ãŒã‚¹ãƒ­ãƒ¼ã•ã‚Œã¾ã™
const mcp2 = new MCPClient({
  servers: {
    /* ... */
  },
});

// ä¿®æ­£ã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’è¡Œã„ã¾ã™ï¼š
// 1. ä¸€æ„ã®IDã‚’è¿½åŠ ã™ã‚‹
const mcp3 = new MCPClient({
  id: "instance-1",
  servers: {
    /* ... */
  },
});

// 2. ã¾ãŸã¯å†ä½œæˆã™ã‚‹å‰ã«åˆ‡æ–­ã™ã‚‹
await mcp1.disconnect();
const mcp4 = new MCPClient({
  servers: {
    /* ... */
  },
});
```



## ã‚µãƒ¼ãƒãƒ¼ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

MCPClientã¯ã‚µãƒ¼ãƒãƒ¼æ¥ç¶šã‚’é©åˆ‡ã«å‡¦ç†ã—ã¾ã™ï¼š

1. è¤‡æ•°ã®ã‚µãƒ¼ãƒãƒ¼ã¸ã®è‡ªå‹•æ¥ç¶šç®¡ç†
2. é–‹ç™ºä¸­ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã®é©åˆ‡ãªã‚µãƒ¼ãƒãƒ¼ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³
3. åˆ‡æ–­æ™‚ã®ãƒªã‚½ãƒ¼ã‚¹ã®é©åˆ‡ãªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—



## SSEãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ã®ä½¿ç”¨

ãƒ¬ã‚¬ã‚·ãƒ¼SSE MCPãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã€MCP SDKã®ãƒã‚°ã«ã‚ˆã‚Šã€`requestInit`ã¨`eventSourceInit`ã®ä¸¡æ–¹ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

```ts
const sseClient = new MCPClient({
  servers: {
    exampleServer: {
      url: new URL("https://your-mcp-server.com/sse"),
      // æ³¨æ„ï¼šrequestInitã ã‘ã§ã¯SSEã«ã¯ä¸ååˆ†ã§ã™
      requestInit: {
        headers: {
          Authorization: "Bearer your-token",
        },
      },
      // ã“ã‚Œã‚‚ã‚«ã‚¹ã‚¿ãƒ ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’æŒã¤SSEæ¥ç¶šã«ã¯å¿…è¦ã§ã™
      eventSourceInit: {
        fetch(input: Request | URL | string, init?: RequestInit) {
          const headers = new Headers(init?.headers || {});
          headers.set("Authorization", "Bearer your-token");
          return fetch(input, {
            ...init,
            headers,
          });
        },
      },
    },
  },
});
```



## é–¢é€£æƒ…å ±

- MCPã‚µãƒ¼ãƒãƒ¼ã®ä½œæˆã«ã¤ã„ã¦ã¯ã€[MCPServerã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](./mcp-server)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
- Model Context Protocolã®è©³ç´°ã«ã¤ã„ã¦ã¯ã€[@modelcontextprotocol/sdkã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://github.com/modelcontextprotocol/typescript-sdk)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
