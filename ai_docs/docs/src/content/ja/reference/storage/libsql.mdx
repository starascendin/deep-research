---
title: "LibSQL ストレージ | ストレージシステム | Mastra Core"
description: Mastraにおける LibSQL ストレージ実装のドキュメント。
---



# LibSQL ストレージ

LibSQL ストレージの実装は、インメモリと永続的データベースの両方として実行できる SQLite 互換のストレージソリューションを提供します。



## インストール

```bash copy
npm install @mastra/libsql@latest
```



## 使用方法

```typescript copy showLineNumbers
import { LibSQLStore } from "@mastra/libsql";

// ファイルデータベース（開発環境）
const storage = new LibSQLStore({
  url: "file:./storage.db",
});

// 永続的データベース（本番環境）
const storage = new LibSQLStore({
  url: process.env.DATABASE_URL,
});
```



## パラメータ

<PropertiesTable
  content={[
    {
      name: "url",
      type: "string",
      description:
        "データベースURL。インメモリデータベースには':memory:'を、ファイルデータベースには'file:filename.db'を、または永続的ストレージには任意のLibSQL互換の接続文字列を使用します。",
      isOptional: false,
    },
    {
      name: "authToken",
      type: "string",
      description: "リモートLibSQLデータベース用の認証トークン。",
      isOptional: true,
    },
  ]}
/>



## 追加の注意事項

### インメモリ vs 永続ストレージ

ファイル設定（`file:storage.db`）は以下の用途に適しています：

- 開発とテスト
- 一時的なストレージ
- 迅速なプロトタイピング

本番環境での使用には、永続データベースURLを使用してください：`libsql://your-database.turso.io`

### スキーマ管理

ストレージ実装は、スキーマの作成と更新を自動的に処理します。以下のテーブルが作成されます：

- `mastra_workflow_snapshot`: ワークフローの状態と実行データを保存
- `mastra_evals`: 評価結果とメタデータを保存  
- `mastra_threads`: 会話スレッドを保存
- `mastra_messages`: 個別のメッセージを保存
- `mastra_traces`: テレメトリとトレースデータを保存
- `mastra_scorers`: スコアリングと評価データを保存
- `mastra_resources`: リソースワーキングメモリデータを保存
