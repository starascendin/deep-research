---
title: "Reference: Memory.getThreadsByResourceIdPaginated() | Memory | Mastra Docs"
description: "Documentation for the `Memory.getThreadsByResourceIdPaginated()` method in Mastra, which retrieves threads associated with a specific resource ID with pagination support."
---

# Memory.getThreadsByResourceIdPaginated()

The `.getThreadsByResourceIdPaginated()` method retrieves threads associated with a specific resource ID with pagination support.

## Usage Example

```typescript copy
await memory.getThreadsByResourceIdPaginated({
  resourceId: "user-123",
  page: 0,
  perPage: 10
});
```

## Parameters

<PropertiesTable
  content={[
    {
      name: "resourceId",
      type: "string",
      description: "The ID of the resource whose threads are to be retrieved",
      isOptional: false,
    },
    {
      name: "page",
      type: "number",
      description: "Page number to retrieve",
      isOptional: false,
    },
    {
      name: "perPage",
      type: "number",
      description: "Number of threads to return per page",
      isOptional: false,
    },
    {
      name: "orderBy",
      type: "'createdAt' | 'updatedAt'",
      description: "Field to sort threads by",
      isOptional: true,
    },
    {
      name: "sortDirection",
      type: "'ASC' | 'DESC'",
      description: "Sort order direction",
      isOptional: true,
    },
  ]}
/>

## Returns

<PropertiesTable
  content={[
    {
      name: "result",
      type: "Promise<PaginationInfo & { threads: StorageThreadType[] }>",
      description: "A promise that resolves to paginated thread results with metadata",
    },
  ]}
/>

## Extended usage example

```typescript filename="src/test-memory.ts" showLineNumbers copy
import { mastra } from "./mastra";

const agent = mastra.getAgent("agent");
const memory = await agent.getMemory();

let currentPage = 0;
let hasMorePages = true;

while (hasMorePages) {
  const threads = await memory?.getThreadsByResourceIdPaginated({
    resourceId: "user-123",
    page: currentPage,
    perPage: 25,
    orderBy: "createdAt",
    sortDirection: "ASC"
  });

  if (!threads) {
    console.log("No threads");
    break;
  }

  threads.threads.forEach((thread) => {
    console.log(`Thread: ${thread.id}, Created: ${thread.createdAt}`);
  });

  hasMorePages = threads.hasMore;
  currentPage++;
}
```

## Related

- [Memory Class Reference](/reference/memory/Memory.mdx)
- [getThreadsByResourceId](/reference/memory/getThreadsByResourceId.mdx) - Non-paginated version
- [Getting Started with Memory](/docs/memory/overview.mdx) (Covers threads/resources concept)
- [createThread](/reference/memory/createThread.mdx)
- [getThreadById](/reference/memory/getThreadById.mdx)
