---
title: Assistant UIとの使用
description: "Assistant UIをMastraと統合する方法を学ぶ"
---

import { Callout, FileTree, Steps } from 'nextra/components'



# Assistant UIとの使用

[Assistant UI](https://assistant-ui.com)は、AI ChatのためのTypeScript/Reactライブラリです。
shadcn/uiとTailwind CSSをベースに構築されており、開発者が数分で美しいエンタープライズグレードのチャット体験を作成できます。

<Callout type="info">
MastraがNext.js APIルートで直接実行されるフルスタック統合アプローチについては、Assistant UIのドキュメントサイトの[フルスタック統合ガイド](https://www.assistant-ui.com/docs/runtimes/mastra/full-stack-integration)をご覧ください。
</Callout>



## 統合ガイド

Mastraをスタンドアロンサーバーとして実行し、Next.jsフロントエンド（Assistant UI付き）をそのAPIエンドポイントに接続します。

<Steps>
### スタンドアロンMastraサーバーの作成

ディレクトリ構造を設定します。可能なディレクトリ構造は次のようになります：

<FileTree>
    <FileTree.Folder name="project-root" defaultOpen>
        <FileTree.Folder name="mastra-server" defaultOpen>
            <FileTree.Folder name="src">
                <FileTree.Folder name="mastra" />
            </FileTree.Folder>
            <FileTree.File name="package.json" />
        </FileTree.Folder>
        <FileTree.Folder name="nextjs-frontend">
            <FileTree.File name="package.json" />
        </FileTree.Folder>
    </FileTree.Folder>
</FileTree>

Mastraサーバーをブートストラップします：

```bash copy
npx create-mastra@latest
```

このコマンドは、新しいMastraプロジェクトをスキャフォールドするためのインタラクティブウィザードを起動し、プロジェクト名の入力を求めて基本的な設定を行います。
プロンプトに従ってサーバープロジェクトを作成してください。

これで基本的なMastraサーバープロジェクトの準備が整いました。次のファイルとフォルダが作成されているはずです：

<FileTree>
    <FileTree.Folder name="src" defaultOpen>
      <FileTree.Folder name="mastra" defaultOpen>
        <FileTree.File name="index.ts" />
        <FileTree.Folder name="agents" defaultOpen>
          <FileTree.File name="weather-agent.ts" />
        </FileTree.Folder>
        <FileTree.Folder name="tools" defaultOpen>
          <FileTree.File name="weather-tool.ts" />
        </FileTree.Folder>
        <FileTree.Folder name="workflows" defaultOpen>
          <FileTree.File name="weather-workflow.ts" />
        </FileTree.Folder>
      </FileTree.Folder>
    </FileTree.Folder>
</FileTree>

<Callout>
`.env`ファイルでLLMプロバイダーの適切な環境変数を設定していることを確認してください。
</Callout>

### Mastraサーバーの実行

次のコマンドを使用してMastraサーバーを実行します：

```bash copy
npm run dev
```

デフォルトでは、Mastraサーバーは`http://localhost:4111`で実行されます。`weatherAgent`は通常、POSTリクエストエンドポイント`http://localhost:4111/api/agents/weatherAgent/stream`経由でアクセス可能になります。次のステップでAssistant UIフロントエンドを設定してこのサーバーに接続するため、このサーバーを実行し続けてください。

### Assistant UIの初期化

次のコマンドで新しい`assistant-ui`プロジェクトを作成します。

```bash copy
npx assistant-ui@latest create
```

<Callout>APIキーの追加、基本設定、手動セットアップ手順を含む詳細なセットアップ手順については、[assistant-uiの公式ドキュメント](https://assistant-ui.com/docs)を参照してください。</Callout>

### フロントエンドAPIエンドポイントの設定

デフォルトのAssistant UIセットアップでは、チャットランタイムがNext.jsプロジェクト内のローカルAPIルート（`/api/chat`）を使用するように設定されています。Mastraエージェントは別のサーバーで実行されているため、フロントエンドをそのサーバーのエンドポイントを指すように更新する必要があります。

`assistant-ui`プロジェクトの`useChatRuntime`フック（通常は`app/assistant.tsx`にあります）を見つけて、`api`プロパティをMastraエージェントのストリームエンドポイントの完全なURLに変更します：

```typescript showLineNumbers copy filename="app/assistant.tsx" {6}
import {
  useChatRuntime,
  AssistantChatTransport,
} from "@assistant-ui/react-ai-sdk";

const runtime = useChatRuntime({
  transport: new AssistantChatTransport({
    api: "MASTRA_ENDPOINT",
  }),
});
```

これで、Assistant UIフロントエンドは実行中のMastraサーバーに直接チャットリクエストを送信するようになります。

### アプリケーションの実行

これで各部分を接続する準備が整いました！MastraサーバーとAssistant UIフロントエンドの両方が実行されていることを確認してください。Next.js開発サーバーを起動します：

```bash copy
npm run dev
```

これで、ブラウザでエージェントとチャットできるようになります。

</Steps>

おめでとうございます！別サーバーアプローチを使用してMastraとAssistant UIの統合に成功しました。Assistant UIフロントエンドがスタンドアロンMastraエージェントサーバーと通信するようになりました。
